

## 네트워크

### 브라우저에 URL을 쳤을 때 무슨 일이 일어나나요?
```text
- 예를들어 브라우저에 https://www.naver.com 인 URL을 입력하고 Enter 키를 누릅니다.
- 브라우저는 해당 URL을 파싱합니다. (https는 통신 프로토콜로 TLS를 사용하여 서버에 연결하도록 지시합니다. / 도메인 / 경로 / 리소스)
- 브라우저는 도메인의 IP 주소를 알아내기 위해 먼저, 브라우저 캐시를 확인하고 없으면 hosts 파일과 OS 캐시를 확인합니다.
- 여기에도 없다면 DNS 서버에게 IP 주소를 질의합니다.
- 먼저 로컬 DNS 서버는 캐시를 확인하고 없으면 Root Name Server에게 com이 있는 TLD Name Server 주소를 받습니다.
- 그리고 TLD Name Server에서 sub domain Name Server 주소를 받고 sub domain Name Server에서 IP 주소를 받게 되고 최종적으로 브라우저에게 도착하게 됩니다.
- IP 주소를 받은 웹 브라우저가 서버와의 TCP 연결을 시작하기 위해 요청 패킷을 TCP/IP 라는 전송제어 프로토콜을 사용하여 라우터 장비와 ISP를 통해 이동하는데 라우팅 테이블을 사용하여 최적의 경로를 찾아 목적지 IP 주소를 가진 웹 서버에 도달합니다.
- 보통 웹서버 대신 캐싱된 정적 콘텐츠을 가진 CDN에 먼저 도달합니다. 
- 브라우저는 서버와의 TCP 연결을 시작합니다. 이때 TCP는 3-way handshake 방식으로 연결합니다.
- HTTPS 프로토콜의 경우 추가적으로 TLS Handshake를 수행합니다.
- 웹 브라우저가 서버에 연결되면, 웹 브라우저가 페이지의 콘텐츠를 응답받기 위해 서버에 HTTP 요청을 전송하는 것으로 시작합니다.
- 서버는 받은 패킷안에 HTTP 메세지를 확인하고 올바른 요청일 경우 요청에 대한 응답을 생성하고 클라이언트에게 보냅니다.
- 웹 브라우저가 서버로 부터 응답을 받으면 응답 헤더를 검사하여 리소스를 렌더링하는 방법에 대한 정보를 확인합니다. 만약 Content-Type이 HTML인 경우,
- 브라우저는 HTML을 파싱하고 렌더링 합니다.
- 만약, 동적인 컨텐츠를 요청할 때 웹 서버는 클라이언트의 요청을 웹 애플리케이션 서버에 전달합니다.
- WAS는 관련된 Servlet을 메모리에 올리고, 해당 Servlet에 대한 Thread를 생성합니다. 그리고 HttpServletRequest와 HttpServletResponse 객체를 생성하여 필터를 거쳐 디스패처서블릿에 전달합니다.
- 그후 디스패처서블릿의 일련의 과정을 거친 후 Response 객체를 Servlet Container에 의해 HTTP 응답으로 변환되어 클라이언트에게 전송됩니다
- Web Server는 결과를 클라이언트에게 전달합니다.
```

### CDN이 뭔가요?

```text
CDN은 전 세계 여러 위치에 분산된 서버 네트워크로, 웹사이트의 콘텐츠를 캐싱(임시 저장)하고 제공합니다.

주요 이점으로는 
지연 시간 감소: 사용자와 가까운 서버에서 콘텐츠 제공
트래픽 분산: 여러 서버에 부하를 분산시켜 원본 서버의 부담 감소
보안 강화: DDoS 공격 등으로부터 보호 기능 제공
신뢰성 향상: 서버 장애 시 다른 서버로 자동 전환

사용 예:
대형 웹사이트: 아마존, 넷플릭스 등
뉴스 사이트: 갑작스러운 트래픽 증가 대응
게임 회사: 대용량 파일의 빠른 다운로드 제공
```

### TLS HandShake 설명해주세요

```text
1. (사전 단계) CA 인증기관에서 서버의 공개키와 정보를 인증기관의 개인키로 서명하여 인증서를 제작하고 서버에 전달합니다.

2. 클라이언트가 서버에 연결을 요청합니다 (ClientHello).

3. 서버는 자신의 인증서를 클라이언트에게 전송합니다 (ServerHello, Certificate).

4. 클라이언트는 자신이 신뢰하는 CA의 공개키로 인증서를 검증합니다.

5. 검증이 성공하면 클라이언트는 서버의 공개키를 획득합니다.

6. 클라이언트는 임시 대칭키(세션 키)를 생성하고, 이를 서버의 공개키로 암호화하여 서버에 전송합니다.

7. 서버는 자신의 개인키로 암호화된 세션 키를 복호화하여 획득합니다.

8. 이제 클라이언트와 서버는 동일한 세션 키를 공유하게 되어, 이후의 통신에서 이 대칭키를 사용하여 데이터를 암호화하고 복호화합니다.
```


### 프로토콜이란

```text
프로토콜은 네트워크 상에서 기기들이 '대화'하는 방법을 정의합니다.
```


https://mangkyu.tistory.com/91

### 오디오 스트리밍은 어떻게 작동하나요?

```text
1. 인코딩
오디오 파일은 먼저 MP3, AAC, Ogg Vorbis 등 스트리밍에 적합한 형식으로 인코딩됩니다. 
이는 오디오 파일을 압축하여 스트리밍 형식으로 변환하는 소프트웨어 인코더를 사용하여 수행됩니다.

2. 스트리밍 서버
인코딩된 오디오 파일은 스트리밍 서버에 저장됩니다. 서버는 오디오 데이터를 청취자의 장치로 보내는 역할을 담당합니다.

3. 스트리밍 프로토콜
스트리밍 서버는 HLS(HTTP 라이브 스트리밍), DASH(Dynamic Adaptive Streaming over HTTP) 또는 RTMP(실시간 메시징 프로토콜)와 같은 스트리밍 프로토콜을 사용하여 인터넷을 통해 오디오 데이터를 전송합니다. 
프로토콜은 오디오 데이터를 작은 데이터 패킷으로 나누어 실시간으로 청취자의 장치로 전송됩니다.


4. 스트리밍 소프트웨어
청취자의 장치는 웹 브라우저 또는 전용 스트리밍 앱과 같은 스트리밍 소프트웨어를 사용하여 스트리밍 서버에 연결하고 오디오 데이터를 수신합니다. 
소프트웨어는 오디오 데이터를 디코딩하여 청취자의 장치에서 재생합니다.
```

