## 데이터베이스

### 뮤택스와 세마포어 차이?

```text
뮤텍스는 Locking 메커니즘으로 락을 걸은 쓰레드만이 임계 영역을 나갈때 락을 해제할 수 있습니다.
wait와 signal 이라는 원자적 연산을 사용합니다.  

하지만 세마포어는 Signaling 메커니즘으로 락을 걸지 않은 쓰레드도 signal을 사용해 락을 해제할 수 있습니다.
```

### 관계형 디비 성능을 최적화하는 방법을 몇가지 알고 있는지

```text
- 인덱스 걸기 
- 복합 인덱스로 커버링 인덱스 타기, 복합인덱스 생성할 때 칼럼 순서 조정하여 데이터 필터링 거치기
- 수직, 수평 파티셔닝
- Replication으로 Master/Slave를 나누어 조회시에는 Slave 업데이트 및 생성 시에는 Master로 가도록 하기
- 옵티마이저에게 힌트를 주어 강제로 인덱스 타게 하기
- 정규화 대신 반정규화 혹은 반정규화 대신 정규화 
- 쿼리 수정 예를들면 드라이빙 테이블 바꾸거나 outer join에서 inner join으로, 계산 쿼리 최적화 등 
- 락 대신 MVCC
```

### Redis 쓰는 이유

```text
1. key-value 형태로, 저장할 때 씁니다.
2. 하드디스크가 아닌 메모리에 저장하여 매우 빠르기 때문에 자주 쓰는 데이터 캐싱하고요
3. 
```

### RDBMS 쓰는 이유

```text
1. 표 형태로 칼럼을 정하고 행마다 데이터를 저장하는 형태 입니다.
2. SQL 문법을 사용합니다.
3. 보통 데이터를 정규화해서 저장합니다.
4. ACID Transaction 기능이 있습니다. 덕분에 데이터 정합성이 높습니다.
5. 따라서 입출력속도보다 데이터 정확성이 중요하다면 RDBMS를 사용합니다.
```

### RDBMS 단점

```text
1. 요구사항이 추가되면, 스키마 변경이 일어납니다. 그런데 이때 이미 많은 양의 데이터가 쌓여있다면 위험부담이 커집니다 (write) 
   따라서 유연한 확장성이 부족합니다
2. 중복제거를 위해 정규화를 진행합니다. 따라서 원래의 데이터를 읽고 싶을때, 조인연산이 늘어나고 성능자체가 안좋아집니다.
3. DB scale out이 어렵습니다. 
   replication 방식이 있는데 read 트래픽이 많으면 좋지만 write 트래픽이 많다면 결국 부하가 발생합니다.
   이를 해결하기 위한 방식으로 multi-master와 샤딩 같은 방법이 있지만 복제 과정과 데이터를 옮기는 과정이 결국 성능이 안좋습니다.
4. ACID를 보장하려다보니 DB서버의 성능에 영향을 미칩니다. 
```



### Graph Database

```text
1. 관계를 중점적으로 저장하고 싶을 떄 사용합니다.
2. SNS, 추천서비스,비행기노선 등에 사용
```

### Document Database

```text
1. document를 저장하며, json 형태로 저장하고, 어떤 형태로 저장할 지 미리 정할 필요가 없습니다. 
2. 구조가 바뀌어도 상관없습니다.
3. 정규화없이 사용합니다. 따라서 중복 제거안합니다.
4. 분산처리 매우 잘해줍니다. 다만, 데이터베이스간의 정합성이 떨어집니다. 
```